// src/shared/types/session.ts
export interface Session {
  id: number;
  name: string;
  description: string;
  startUrl: string;
  startTime: string;
  pages: Page[];
}

export interface Page {
  url: string;
  visitTime: string;
  metrics: PageMetrics;
}

export interface PageMetrics {
  xhrRequests: XHRRequest[];
  resources: ResourceMetrics;
  sdks: SDKMetrics;
}

export interface XHRRequest {
  type: 'xhr';
  url: string;
  method: string;
  status: number;
  timestamp: string;
  duration: number;
  requestHeaders?: Record<string, string>;
  requestData?: string;
  responseData?: string;
}

export interface ResourceMetrics {
  scripts: ResourceEntry[];
  images: ResourceEntry[];
}

export interface ResourceEntry {
  type: 'resource';
  resourceType: string;
  url: string;
  timestamp: string;
}

export interface SDKMetrics {
  sdks: SDKEntry[];
  tracking: SDKEntry[];
}

export interface SDKEntry {
  name: string;
  version?: string;
  type: string;
  timestamp: string;
  url: string;
}

// src/shared/types/integration.ts
export interface IntegrationConfig {
  regex: RegExp;
  includeQueryParams?: string[];
  versionGroup?: number;
}

export interface IntegrationMatch {
  name: string;
  version?: string;
}

// src/shared/types/ipc.ts
export interface IPCMainHandlers {
  'create-web-contents': (url: string) => Promise<WebContentsResult>;
  'end-session': () => Promise<{ success: boolean }>;
}

export interface IPCRendererHandlers {
  'page-metrics': (data: XHRRequest | ResourceEntry) => void;
  'page-navigated': (url: string) => void;
}

export interface WebContentsResult {
  success?: boolean;
  error?: string;
  id?: number;
}
